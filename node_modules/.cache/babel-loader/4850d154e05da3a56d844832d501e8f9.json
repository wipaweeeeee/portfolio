{"ast":null,"code":"var forEach = require('lodash/forEach');\n\nvar isBrowser = typeof window !== 'undefined';\n\nfunction HttpHeaders() {\n  this._headersByLowercasedKey = {};\n}\n\nHttpHeaders.prototype.set = function (headerKey, headerValue) {\n  var lowercasedKey = headerKey.toLowerCase();\n\n  if (lowercasedKey === 'x-airtable-user-agent') {\n    lowercasedKey = 'user-agent';\n    headerKey = 'User-Agent';\n  }\n\n  this._headersByLowercasedKey[lowercasedKey] = {\n    headerKey: headerKey,\n    headerValue: headerValue\n  };\n};\n\nHttpHeaders.prototype.toJSON = function () {\n  var result = {};\n  forEach(this._headersByLowercasedKey, function (headerDefinition, lowercasedKey) {\n    var headerKey;\n\n    if (isBrowser && lowercasedKey === 'user-agent') {\n      // Some browsers do not allow overriding the user agent.\n      // https://github.com/Airtable/airtable.js/issues/52\n      headerKey = 'X-Airtable-User-Agent';\n    } else {\n      headerKey = headerDefinition.headerKey;\n    }\n\n    result[headerKey] = headerDefinition.headerValue;\n  });\n  return result;\n};\n\nmodule.exports = HttpHeaders;","map":null,"metadata":{},"sourceType":"script"}