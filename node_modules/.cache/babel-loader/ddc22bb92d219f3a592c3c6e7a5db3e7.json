{"ast":null,"code":"import _slicedToArray from \"/Users/wipawe.sirikolkarn/develop/portfolio/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/wipawe.sirikolkarn/develop/portfolio/src/packages/archive/Archive.js\";\nimport React, { useState, useEffect } from 'react';\nimport Masonry from 'react-masonry-css';\nimport styles from './archive.module.scss';\nimport classNames from 'classnames';\nimport Banner from '../border/index';\n\nvar Airtable = require('airtable');\n\nconst Archive = () => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        content = _useState2[0],\n        setContent = _useState2[1];\n\n  const breakpointColumnsObj = {\n    default: 3,\n    1200: 3,\n    1000: 2,\n    500: 1\n  };\n  var allContent = [];\n\n  const retrieveContent = () => {\n    var base = new Airtable({\n      apiKey: process.env.REACT_APP_AIRTABLE_KEY\n    }).base(process.env.REACT_APP_AIRTABLE_BASE);\n    base('Work').select().eachPage(function page(records, fetchNextPage) {\n      records.forEach(function (record) {\n        allContent.push(record);\n      });\n      fetchNextPage();\n    }, function done(err) {\n      if (err) {\n        console.error(err);\n        return;\n      }\n\n      setContent(allContent.sort((a, b) => b.order - a.order));\n    });\n  };\n\n  useEffect(() => {\n    retrieveContent();\n  }, []);\n\n  const GenerateContent = () => {\n    let masonry = [];\n    content.map((item, index) => {\n      if (item.fields.attachments) {\n        let src = item.fields.attachments[0].url;\n        let title = item.fields.title;\n        let description = item.fields.description;\n        masonry.push(React.createElement(\"div\", {\n          className: styles.tile,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: styles.text,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }, title, React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }), description)), React.createElement(\"img\", {\n          key: index,\n          src: src,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        })));\n      }\n    });\n    return React.createElement(Masonry, {\n      breakpointCols: breakpointColumnsObj,\n      className: styles.grid,\n      columnClassName: styles.column,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, masonry);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(Banner, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: styles.intro,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    href: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"\\u2190 Back\"), React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"An archive of unpublished / unrelated / experimental work\")), React.createElement(GenerateContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }));\n};\n\nexport default Archive;","map":{"version":3,"sources":["/Users/wipawe.sirikolkarn/develop/portfolio/src/packages/archive/Archive.js"],"names":["React","useState","useEffect","Masonry","styles","classNames","Banner","Airtable","require","Archive","content","setContent","breakpointColumnsObj","default","allContent","retrieveContent","base","apiKey","process","env","REACT_APP_AIRTABLE_KEY","REACT_APP_AIRTABLE_BASE","select","eachPage","page","records","fetchNextPage","forEach","record","push","done","err","console","error","sort","a","b","order","GenerateContent","masonry","map","item","index","fields","attachments","src","url","title","description","tile","text","grid","column","intro"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'; \nimport Masonry from 'react-masonry-css'\nimport styles from './archive.module.scss';\nimport classNames from 'classnames';\nimport Banner from '../border/index';\n\nvar Airtable = require('airtable');\n\nconst Archive = () => {\n\n\tconst [ content, setContent ] = useState([]);\n\tconst breakpointColumnsObj = {\n\t  default: 3,\n\t  1200: 3,\n\t  1000: 2,\n\t  500: 1\n\t};\n\n\tvar allContent = [];\n\n\tconst retrieveContent = () => {\n\t\t\n\t\tvar base = new Airtable({apiKey: process.env.REACT_APP_AIRTABLE_KEY}).base(process.env.REACT_APP_AIRTABLE_BASE);\n\t\tbase('Work').select().eachPage(function page(records, fetchNextPage) {\n\n\t\t    records.forEach(function(record) {\n\t\t    \tallContent.push(record);\n\t\t    });\n\n\t\t    fetchNextPage();\n\n\t\t}, function done(err) {\n\t\t    if (err) { console.error(err); return; }\n\t\t    setContent(allContent.sort((a,b) => b.order - a.order));\n\n\t\t});\n\t}\t\n\n\tuseEffect(() => {\n\t\tretrieveContent();\n\t}, []);\n\t\n\tconst GenerateContent = () => {\n\t\tlet masonry = [];\n\n\t\tcontent.map((item, index) => {\n\t\t\tif (item.fields.attachments) {\n\t\t\t\tlet src = item.fields.attachments[0].url;\n\t\t\t\tlet title = item.fields.title;\n\t\t\t\tlet description = item.fields.description;\n\t\t\t\tmasonry.push( \n\t\t\t\t\t<div className={styles.tile}>\n\t\t\t\t\t\t<div className={styles.text}>\n\t\t\t\t\t\t\t<p>{title}<br />{description}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<img key={index} src={src}/> \n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t\t\n\t\t})\n\n\t\treturn (\n\t\t\t<Masonry\n\t\t\t  breakpointCols={breakpointColumnsObj}\n\t\t\t  className={styles.grid}\n\t\t\t  columnClassName={styles.column}>\n\t  \t\t\t{masonry}\n\t  \t\t</Masonry>\n\t\t)\n\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<Banner />\n\t\t\t<div className={styles.intro}>\n\t\t\t\t<a href=\"/\">&larr; Back</a>\n\t\t\t\t<h1>An archive of unpublished / unrelated / experimental work</h1>\n\t\t\t</div>\n\t\t\t<GenerateContent />\n\t\t</div>\n\t)\n}\n\nexport default Archive;"]},"metadata":{},"sourceType":"module"}