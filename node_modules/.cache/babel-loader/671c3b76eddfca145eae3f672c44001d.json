{"ast":null,"code":"'use strict';\n\nvar Base = require('./base');\n\nvar Record = require('./record');\n\nvar Table = require('./table');\n\nvar AirtableError = require('./airtable_error');\n\nfunction Airtable(opts) {\n  opts = opts || {};\n  var defaultConfig = Airtable.default_config();\n  var apiVersion = opts.apiVersion || Airtable.apiVersion || defaultConfig.apiVersion;\n  Object.defineProperties(this, {\n    _apiKey: {\n      value: opts.apiKey || Airtable.apiKey || defaultConfig.apiKey\n    },\n    _endpointUrl: {\n      value: opts.endpointUrl || Airtable.endpointUrl || defaultConfig.endpointUrl\n    },\n    _apiVersion: {\n      value: apiVersion\n    },\n    _apiVersionMajor: {\n      value: apiVersion.split('.')[0]\n    },\n    _noRetryIfRateLimited: {\n      value: opts.noRetryIfRateLimited || Airtable.noRetryIfRateLimited || defaultConfig.noRetryIfRateLimited\n    }\n  });\n  this.requestTimeout = opts.requestTimeout || defaultConfig.requestTimeout;\n\n  if (!this._apiKey) {\n    throw new Error('An API key is required to connect to Airtable');\n  }\n}\n\nAirtable.prototype.base = function (baseId) {\n  return Base.createFunctor(this, baseId);\n};\n\nAirtable.default_config = function () {\n  return {\n    endpointUrl: process.env.AIRTABLE_ENDPOINT_URL || 'https://api.airtable.com',\n    apiVersion: '0.1.0',\n    apiKey: process.env.AIRTABLE_API_KEY,\n    noRetryIfRateLimited: false,\n    requestTimeout: 300 * 1000 // 5 minutes\n\n  };\n};\n\nAirtable.configure = function (opts) {\n  Airtable.apiKey = opts.apiKey;\n  Airtable.endpointUrl = opts.endpointUrl;\n  Airtable.apiVersion = opts.apiVersion;\n  Airtable.noRetryIfRateLimited = opts.noRetryIfRateLimited;\n};\n\nAirtable.base = function (baseId) {\n  return new Airtable().base(baseId);\n};\n\nAirtable.Base = Base;\nAirtable.Record = Record;\nAirtable.Table = Table;\nAirtable.Error = AirtableError;\nmodule.exports = Airtable;","map":null,"metadata":{},"sourceType":"script"}